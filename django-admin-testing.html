<!DOCTYPE html>
<html lang="ru">
<head>
  <title>import Blog</title>
  <meta charset="utf-8"/>


<meta name="tags" content="django"/>
<meta name="tags" content="python"/>
<meta name="tags" content="testing"/>

  <link rel=icon href="/theme/build/img/favicon.png" type="image/png">
  <link rel="stylesheet" href="/theme/build/css/all.css">
</head>

<body>
<div class="container">
  <div class="logo">
    <a href="/">import Blog <strong></strong></a>
  </div>
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li
><a href="/pages/about.html">About</a>
          </li>
        </ul>
      </div>
    </div>
  </nav><!-- /#menu -->
  <div class="row">
    <div class="col-xs-9">
<section id="content">
  <ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/category/django.html">Django</a></li>
    <li class="active">Django admin testing</li>
  </ol>
  <div class="panel panel-default">
    <div class="panel-body">
      <article>
        <header>
          <h3 class="entry-title">
            <a href="/category/django.html">
              Django
            </a>
            &rarr;
            Django admin testing
          </h3>
        </header>
        <span class="glyphicon glyphicon-calendar" title="Created"></span>
        <time class="published" datetime="2016-11-13T23:16:00+07:00">
          Sun 13 November 2016
        </time>
        <address class="vcard author">
          <a class="url fn" href="/author/anton-prokhorov.html">@Anton Prokhorov</a>
        </address>
        <div class="entry-content">
          <p>There is a some case where you have to write custom admin methods. For example it can be a custom admin object action or
custom field in list of objects. For example:</p>
<!-- code-block::python

def rules_count(self, obj):
    """Calculate count of ``rules``"""
    return obj.rules.count() -->
<p>To test this you can write something like this:</p>
<!-- code-block::python

class TaskAdminTest(TestCase):
"""Test case for ``OneTimeTaskAdmin`` and ``PeriodicTaskAdmin`` classes"""

def setUp(self):
    self.admin = OneTimeTaskAdmin(OneTimeTask, AdminSite())
    self.task = OneTimeTaskFactory(rules=[RuleFactory()],
                                   profiles=[ProfileFactory()])

def test_rules_count(self):
    """Test ``rules_count`` admin method"""
    self.assertEqual(self.admin.rules_count(self.task),
                     self.task.rules.count()) -->

        </div><!-- /.entry-content -->
        <footer>
          <a href="/tag/django.html"><span class="glyphicon glyphicon-tag"></span> django</a>
          <a href="/tag/python.html"><span class="glyphicon glyphicon-tag"></span> python</a>
          <a href="/tag/testing.html"><span class="glyphicon glyphicon-tag"></span> testing</a>
        </footer>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'importblog'; 
    var disqus_title = 'Django admin testing';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </article>
    </div>
  </div>
</section>
    </div>
    <div class="col-xs-3">
      <div class="panel panel-primary">
        <div class="panel-heading">Categories</div>
        <div class="panel-body">
          <nav>
            <ul class="nav nav-pills nav-stacked">
              <li  class="active" >
                <a href="/category/django.html">
                  <span class="glyphicon glyphicon-folder-open"></span>
                  Django
                </a>
              </li>
              <li >
                <a href="/category/linux.html">
                  <span class="glyphicon glyphicon-folder-close"></span>
                  Linux
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
      <div class="panel panel-primary">
        <div class="panel-heading">Tags</div>
        <div class="panel-body">
          <nav>
            <a href="/tag/python.html"><span class="glyphicon glyphicon-tag"></span>
              python(1)
            </a>
            <a href="/tag/testing.html"><span class="glyphicon glyphicon-tag"></span>
              testing(1)
            </a>
            <a href="/tag/django.html"><span class="glyphicon glyphicon-tag"></span>
              django(1)
            </a>
            <a href="/tag/notebook.html"><span class="glyphicon glyphicon-tag"></span>
              notebook(1)
            </a>
            <a href="/tag/linux.html"><span class="glyphicon glyphicon-tag"></span>
              linux(1)
            </a>
            <a href="/tag/asus.html"><span class="glyphicon glyphicon-tag"></span>
              asus(1)
            </a>
            <a href="/tag/ubuntu.html"><span class="glyphicon glyphicon-tag"></span>
              ubuntu(1)
            </a>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <footer id="contentinfo" class="body">
    <address id="about" class="vcard body">
      <div class="panel panel-default">
        <div class="panel-body">
          <a href="https://www.facebook.com/betrayer65536" target="_blank">Anton Prokhorov</a> Â© 2016
        </div>
      </div>
    </address><!-- /#about -->
  </footer><!-- /#contentinfo -->
</div>
<script type="application/javascript" src="/theme/build/js/all.js"></script>
</body>
</html>